---
name: moon-review
description: ë¹„íŒì  ì½”ë“œ/ì•„í‚¤í…ì²˜ ë¦¬ë·° (Multi-Perspective + Feedback + Feedforward)
allowed-tools: Bash, Read, Write, Edit, Glob, Grep, TodoWrite, Task
model: sonnet
context: fork
agent: code-reviewer
argument-hint: <target> [--scope code|arch|security|perf|all] [--depth quick|standard|deep]
hooks:
  PreToolUse:
    - matcher: "Read"
      command: "python3 ~/.claude/hooks/review-scope-track.py"
  PostToolUse:
    - matcher: "Write"
      command: "python3 ~/.claude/hooks/review-findings-collect.py"
---

# /moon-review - Unified Critical Review System

> ë‹¤ì¤‘ ê´€ì  ë¹„íŒì  ë¶„ì„ + í”¼ë“œë°± + í”¼ë“œí¬ì›Œë“œ í†µí•© ë¦¬ë·° ì‹œìŠ¤í…œ

## Quick Start

```bash
# ê¸°ë³¸ ì½”ë“œ ë¦¬ë·°
/moon-review src/components/

# ì•„í‚¤í…ì²˜ ì‹¬ì¸µ ë¦¬ë·°
/moon-review . --scope arch --depth deep

# ë³´ì•ˆ ì¤‘ì‹¬ ë¦¬ë·°
/moon-review src/auth/ --scope security

# ì¢…í•© ë¦¬ë·°
/moon-review . --scope all --depth standard
```

## Arguments

| Argument | Description | Default |
|----------|-------------|---------|
| `$TARGET` | ë¦¬ë·° ëŒ€ìƒ (íŒŒì¼/ë””ë ‰í† ë¦¬/PR#) | . |
| `--scope` | ë¦¬ë·° ë²”ìœ„ | code |
| `--depth` | ë¶„ì„ ê¹Šì´ | standard |
| `--output` | ì¶œë ¥ í˜•ì‹ (report/inline/checklist) | report |

### Scope Options

| Scope | Focus |
|-------|-------|
| `code` | ì½”ë“œ í’ˆì§ˆ, ê°€ë…ì„±, ìœ ì§€ë³´ìˆ˜ì„± |
| `arch` | ì•„í‚¤í…ì²˜, ì„¤ê³„ íŒ¨í„´, ì˜ì¡´ì„± |
| `security` | ë³´ì•ˆ ì·¨ì•½ì , OWASP Top 10 |
| `perf` | ì„±ëŠ¥ ë³‘ëª©ì , ìµœì í™” ê¸°íšŒ |
| `docs` | ë¬¸ì„œí™” í’ˆì§ˆ ë° ì™„ì „ì„± |
| `all` | ì¢…í•© ë¦¬ë·° |

### Depth Options

| Depth | Description |
|-------|-------------|
| `quick` | ë¹ ë¥¸ ìŠ¤ìº” (ì£¼ìš” ì´ìŠˆë§Œ, ~5ë¶„) |
| `standard` | í‘œì¤€ ë¦¬ë·° (ê· í˜•ì¡íŒ ë¶„ì„, ~15ë¶„) |
| `deep` | ì‹¬ì¸µ ë¶„ì„ (ëª¨ë“  ê´€ì , ~30ë¶„+) |

## Review Protocol

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MOON REVIEW PIPELINE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  Phase 1: Critical Review (í˜„ìƒíƒœ ë¶„ì„)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Multi-Perspective Analysis:                                      â”‚    â”‚
â”‚  â”‚ â€¢ Code Quality: ë³µì¡ë„, ê°€ë…ì„±, ìœ ì§€ë³´ìˆ˜ì„±                        â”‚    â”‚
â”‚  â”‚ â€¢ Architecture: SOLID, ê²°í•©ë„, ì‘ì§‘ë„                            â”‚    â”‚
â”‚  â”‚ â€¢ Security: ì…ë ¥ ê²€ì¦, ì¸ì¦/ì¸ê°€, ë°ì´í„° ë…¸ì¶œ                     â”‚    â”‚
â”‚  â”‚ â€¢ Performance: ì•Œê³ ë¦¬ì¦˜ ë³µì¡ë„, ë©”ëª¨ë¦¬, ìºì‹±                      â”‚    â”‚
â”‚  â”‚ â€¢ Testing: ì»¤ë²„ë¦¬ì§€, ì—£ì§€ ì¼€ì´ìŠ¤                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â†“                                       â”‚
â”‚  Phase 2: Feedback (êµ¬ì²´ì  ê°œì„ ì )                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ ë¬¸ì œì ë§ˆë‹¤ êµ¬ì²´ì  í•´ê²° ë°©í–¥ ì œì‹œ                                â”‚    â”‚
â”‚  â”‚ â€¢ ì½”ë“œ ì˜ˆì‹œë¡œ ê°œì„ ì•ˆ ì‹œì—°                                         â”‚    â”‚
â”‚  â”‚ â€¢ ìš°ì„ ìˆœìœ„ ëª…ì‹œ (Critical/High/Medium/Low)                        â”‚    â”‚
â”‚  â”‚ â€¢ ì˜ˆìƒ ê³µìˆ˜ ì œì‹œ                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â†“                                       â”‚
â”‚  Phase 3: Feedforward (ë¯¸ë˜ ì§€í–¥ì  ì œì•ˆ)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­                                                 â”‚    â”‚
â”‚  â”‚ â€¢ ê¸°ìˆ  ë¶€ì±„ ì˜ˆë°©                                                  â”‚    â”‚
â”‚  â”‚ â€¢ ì•„í‚¤í…ì²˜ ì§„í™” ê²½ë¡œ                                              â”‚    â”‚
â”‚  â”‚ â€¢ íŒ€ ì—­ëŸ‰ ì„±ì¥ ê¸°íšŒ                                               â”‚    â”‚
â”‚  â”‚ â€¢ ìë™í™” ë° ë„êµ¬ í™œìš©                                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Multi-AI Integration

ëŒ€ê·œëª¨ ë¦¬ë·° ì‹œ ìë™ ìœ„ì„:

| ìƒí™© | ìœ„ì„ ëŒ€ìƒ | ëª…ë ¹ |
|------|-----------|------|
| 30+ íŒŒì¼ ë¶„ì„ | Gemini CLI | `gemini -p "Comprehensive code review" -f "src/**/*"` |
| í¬ë¡œìŠ¤íŒŒì¼ íŒ¨í„´ | Gemini CLI | `gemini -p "Cross-file inconsistencies" -f "**/*.ts"` |
| ë³µì¡í•œ ì¶”ë¡  | Claude | ê¸°ë³¸ ì²˜ë¦¬ |

## Severity Levels

| Level | ì •ì˜ | ëŒ€ì‘ ì‹œê°„ |
|-------|------|----------|
| ğŸ”´ Critical | ì¦‰ê°ì  ìµìŠ¤í”Œë¡œì‡/ì¥ì•  ê°€ëŠ¥ | 24ì‹œê°„ ë‚´ |
| ğŸŸ  High | ì•…ìš© ê°€ëŠ¥/ì£¼ìš” ë²„ê·¸ | 1ì£¼ ë‚´ |
| ğŸŸ¡ Medium | ì¡°ê±´ë¶€ ë¬¸ì œ | 1ê°œì›” ë‚´ |
| ğŸŸ¢ Low | ìµœì†Œ ìœ„í—˜, ê°œì„  ê¶Œì¥ | ë‹¤ìŒ ë¦´ë¦¬ìŠ¤ |

## Quality Metrics

| Metric | Excellent | Good | Needs Work | Critical |
|--------|-----------|------|------------|----------|
| Cyclomatic Complexity | <10 | 10-15 | 15-25 | >25 |
| Function Length | <30 lines | 30-50 | 50-100 | >100 |
| Nesting Depth | <3 | 3-4 | 4-6 | >6 |
| Test Coverage | >80% | 60-80% | 40-60% | <40% |
| Documentation | >90% | 70-90% | 50-70% | <50% |

## Output Format

```markdown
# ë¦¬ë·° ë³´ê³ ì„œ: [Target]

**ë¦¬ë·° ëŒ€ìƒ**: [íŒŒì¼/ë””ë ‰í† ë¦¬]
**ë²”ìœ„**: [code|arch|security|perf|all]
**ê¹Šì´**: [quick|standard|deep]
**ë¦¬ë·°ì¼**: YYYY-MM-DD

---

## ìš”ì•½

### ì „ì²´ í‰ê°€: [A-F] ([ì ìˆ˜]/100)

| ì˜ì—­ | ì ìˆ˜ | ìƒíƒœ |
|------|------|------|
| Code Quality | 75/100 | âš ï¸ Needs Improvement |
| Architecture | 85/100 | âœ… Good |
| Security | 60/100 | ğŸš¨ Critical Issues |
| Performance | 80/100 | âœ… Good |
| Documentation | 45/100 | âŒ Poor |

### í•µì‹¬ ë°œê²¬
- ğŸ”´ [Critical Issue]
- ğŸŸ  [High Priority Issue]
- ğŸŸ¡ [Medium Priority Issue]

---

## 1. Critical Review (í˜„ìƒíƒœ ë¶„ì„)

### 1.1 Code Quality

#### Strengths
- [ê°•ì  1]
- [ê°•ì  2]

#### Issues Found

| ID | Severity | Location | Issue | Impact |
|----|----------|----------|-------|--------|
| CQ-001 | ğŸ”´ | src/auth.ts:45 | SQL Injection | Data breach |
| CQ-002 | ğŸŸ  | src/api.ts:120 | Unhandled error | Crash |

### 1.2 Architecture
[ì•„í‚¤í…ì²˜ ë¶„ì„]

### 1.3 Security
[ë³´ì•ˆ ë¶„ì„]

### 1.4 Performance
[ì„±ëŠ¥ ë¶„ì„]

---

## 2. Feedback (êµ¬ì²´ì  ê°œì„ ì•ˆ)

### Issue CQ-001: SQL Injection

**í˜„ì¬ ì½”ë“œ**:
```typescript
// âŒ ì·¨ì•½í•œ ì½”ë“œ
const query = `SELECT * FROM users WHERE id = ${userId}`;
```

**ê°œì„ ì•ˆ**:
```typescript
// âœ… Parameterized query
const query = `SELECT * FROM users WHERE id = ?`;
db.query(query, [userId]);
```

**ìš°ì„ ìˆœìœ„**: ğŸ”´ Critical - ì¦‰ì‹œ ìˆ˜ì • í•„ìš”
**ì˜ˆìƒ ê³µìˆ˜**: 30ë¶„
**ê´€ë ¨ íŒŒì¼**: src/auth.ts, src/db.ts

---

## 3. Feedforward (ë¯¸ë˜ ë°©í–¥)

### 3.1 ë‹¨ê¸° (1-2ì£¼)
| ì œì•ˆ | ê·¼ê±° | ê¸°ëŒ€ íš¨ê³¼ |
|------|------|----------|
| ESLint ê·œì¹™ ê°•í™” | ì½”ë“œ í’ˆì§ˆ ì´ìŠˆ ë°˜ë³µ | ìë™ í’ˆì§ˆ ê´€ë¦¬ |

### 3.2 ì¤‘ê¸° (1-3ê°œì›”)
| ì œì•ˆ | ê·¼ê±° | ê¸°ëŒ€ íš¨ê³¼ |
|------|------|----------|
| ëª¨ë“ˆ ë¶„ë¦¬ | SRP ìœ„ë°˜ | ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ |

### 3.3 ì¥ê¸° (3-6ê°œì›”)
| ì œì•ˆ | ê·¼ê±° | ê¸°ëŒ€ íš¨ê³¼ |
|------|------|----------|
| ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜ | í™•ì¥ì„± í•œê³„ | ë…ë¦½ ë°°í¬ ê°€ëŠ¥ |

---

## 4. Action Items

### Immediate (24ì‹œê°„ ë‚´)
- [ ] CQ-001: SQL Injection ìˆ˜ì •
- [ ] CQ-002: Error handling ì¶”ê°€

### This Sprint
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 60% ë‹¬ì„±
- [ ] ESLint ê·œì¹™ ì—…ë°ì´íŠ¸

### Next Sprint
- [ ] ëª¨ë“ˆ ë¶„ë¦¬ ê³„íš ìˆ˜ë¦½

---

## 5. Learning Opportunities
1. **OWASP Top 10** - ë³´ì•ˆ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤
2. **Clean Code** - í´ë¦° ì½”ë“œ ì›ì¹™

---
*Generated by /moon-review - Context Engineering Framework*
```

## Integration

ë¦¬ë·° ê²°ê³¼ ìë™ ì²˜ë¦¬:
1. **Critical ì´ìŠˆ** â†’ TodoWrite (ì¦‰ì‹œ ì¶”ì )
2. **ê°œì„  ê¶Œì¥** â†’ ì„ íƒì  ì ìš©
3. **Feedforward** â†’ ì§€ì‹ ë² ì´ìŠ¤ ì €ì¥

## Examples

### ì½”ë“œ ë¦¬ë·°
```bash
/moon-review src/components/ --scope code --depth standard
```

### ë³´ì•ˆ ê°ì‚¬
```bash
/moon-review . --scope security --depth deep --output checklist
```

### PR ë¦¬ë·°
```bash
/moon-review PR#123 --scope all
```

### ì•„í‚¤í…ì²˜ í‰ê°€
```bash
/moon-review . --scope arch --depth deep
```

## Related Commands

- `/moon-loop` - ì—°ì† ì‹¤í–‰ ë£¨í”„
- `/moon-research` - ì‹¬ì¸µ ì—°êµ¬
- `/verify-app` - ì•± ê²€ì¦

---

## Execution Start

**Target**: $ARGUMENTS

### Review Protocol

1. **ë²”ìœ„ ë¶„ì„**: ë¦¬ë·° ëŒ€ìƒ ìŠ¤ìº” ë° ë¶„ë¥˜
2. **Critical Review**: ë‹¤ì¤‘ ê´€ì  í˜„ìƒíƒœ ë¶„ì„
3. **Feedback**: êµ¬ì²´ì  ê°œì„ ì•ˆ ë„ì¶œ
4. **Feedforward**: ë¯¸ë˜ ì§€í–¥ì  ì œì•ˆ
5. **Action Items**: ìš°ì„ ìˆœìœ„ë³„ ì•¡ì…˜ ì•„ì´í…œ

```
ë¦¬ë·°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì™„ë£Œë˜ë©´ êµ¬ì¡°í™”ëœ ë¦¬ë·° ë³´ê³ ì„œë¥¼ ì œê³µí•˜ê² ìŠµë‹ˆë‹¤.
```
